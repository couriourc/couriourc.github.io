---
author: couriourc
categories: [技术学习]
date created: 2023-06-22
date modified: 2023-06-29
dg-publish: false
title: 函数式编程
---

## 一句话简述

函数式函数式编程，是一种从数据流和数据关系的思考方式，可读性强且安全。**Pay attention!!!** 函数表示一切，包括数字。

## 约定

本文使用 `Dart` 语言描述，对于编程范式，具体是什么语言并不重要，只是顺手而已。

## 为什么需要函数式编程

### 可预测、Bug 少

函数式编程中，以函数为载体，数据流为驱动，数据是**不允许篡改**的，数据的操作是**公开的**，数据的流动是**可预测**的。这样就能很好的规避竞态问题。

### 易于测试

以函数为叙述单元，只需要知道数据的来源，对于数据的返回值是，正如之前所说，可预测的数据流，那么就很容易将用例拆分，从而做到测试。

### 移植性高

函数为思考主体，从而做到模块化。

## 函数式编程是什么

根据维基百科所述，**函数式编程**(又叫做**函数程序设计**、**泛函编程**、**Functional Programing**)，是一种编程范式，它将[电脑运算]( https://zh.wikipedia.org/wiki/%E9%9B%BB%E8%85%A6%E9%81%8B%E7%AE%97 "电脑运算")视为[函数]( https://zh.wikipedia.org/wiki/%E5%87%BD%E6%95%B0 "函数")运算，并且避免使用程序[状态]( https://zh.wikipedia.org/w/index.php?title=%E7%8A%B6%E6%80%81_ (%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6)&action=edit&redlink=1)以及[可变物件]( https://zh.wikipedia.org/wiki/%E4%B8%8D%E5%8F%AF%E8%AE%8A%E7%89%A9%E4%BB%B6 "不可变物件")。从定义出发，有两个关键点：

* 函数运算。  
在 **函数式编程**中，函数就是头等公民，你可以将函数名当作变量赋值给其他变量，使用方式不受影响。比如

```dart
void main() {
  // 定义一个减法
  int minus(int a,int b){
    return a-b;
  }
  // 定义一个加法
  var add = (int a,int b)=>a+b;
  // 将 minus 赋值给另外一个变量
  var minusTwo = minus;
  // 使用函数
  print(add(1,2)); // 输出 3
  print(minus_2(1,2)); // 输出 -1
}

```

* 状态及可变性管理。  
**函数式编程**中的特点是，纯函数，所谓纯函数是指相同的输入总会得到相同的输出，并且不会产生副作用的函数。

这和数学中的关注点一样 `f(data) = (other_state_data)`，也就是 `dataIn`，`dataOut`，这个之间只是来自于我们的函数作用不同，进一步请关联一下数学中基本的函数基础，`单调性`、`对称性`、`复合函数`、甚至是一些其他复杂的概念，这是**函数的切入点**。**数据的切入点**则可以理解**数据流**，数据如同水流一样，在奔向大海的途中，有阻碍，有汇入，但是本质还是那一堆水的映射。所谓副作用，就是不污染全局，但是接受闭包。

```dart
// 全局的作用域
var globalVarity = 0;

dirty(){
	// 污染全局变量
	globalVarity++;
}
// 又一个函数调用
dirtyTwo(){
	globalVarity++;
}
// 那么在并发的时候,Opps 你猜是什么，这还是微任务的情况下，是可预见的。
main(){
  while ( globalVarity < 10) {
    Future.delayed(Duration(seconds: 0),(){
      dirty();
      print('for 1 $globalVarity');
    });
    Future.delayed(Duration(seconds: 0),(){
      dirtyTwo();
      print('for 2 $globalVarity');
    });
    // 篡改
    globalVarity++;
  }
	// 面目全非的 globalVarity;
}
```

## 函数式编程与其他范式的区别

### 面向过程编程

命令式编程，就是 `one by one`，这种思考方式偏向于原子化，经典的例子：把大象关进冰箱需要几步。面向对象的描述方式是说，第一步，打开冰箱，第二步装入冰箱，第三步关上冰箱。

### 面向对象编程

面向对象编程，将操作方式进行分类，让动作属于某一个对象，然后进行架构。依然以关大象举例，大象打开了冰箱（对象作用），大象走进了冰箱，大象关上了门。  

### 声明式编程 (面向字典编程🧠)

声明式编程，一切都已经安排好了，是一套预定的规则，比如 `CSS`，你只需要加上合适的属性，就能完成编程，底层已经为您做了实现。还是以上面关大象为例子，大象可以被装进冰箱，冰箱可以装大象。然后声明，大象在冰箱中。
