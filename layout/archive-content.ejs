<% const all_posts = site.posts.toArray().reduce(function (pre, now){ %>
    <% const now_time = now.date.format('YYYY-MM');
        if (pre[now_time]) {
            pre[now_time].push(now);
            return pre;
        } else {
            return {
                ...pre,
                [now_time]: [now],
            };
        }
    %>
<% },{}); %>
<section class="fade-in-down-animation">
    <main class="archive-container">
        <div class="archive-total">
            <p class="font-bold text-xl text-center select-none">
                ðŸŽ‰ðŸŽ‰âœ¨ Ha!Surpriseeeeee! æœ‰äº† <span><%= site.posts.length; %> ç¯‡æ–‡ç«  </span>
                <span>~(ï¿£â–½ï¿£)~*</span>
            </p>
        </div>
        <hr class="border-dashed mt-4 mb-2 bg-black"/>

        <% Object.entries(all_posts).forEach(function ([year, year_posts]) { %>
            <details open>
                <summary
                        class="archive-time text-lg mt-5 mb-2 cursor-pointer font-bold"
                        title=" è¿™ä¸ªæœˆæœ‰ <%= year_posts.length %> ç¯‡å–” ~">
                    <span><%= year; %></span>
                    (ðŸŽ¨<span class="text-blue-600/100"
                    ><%= year_posts.length %></span>)
                </summary>
                <div class="post-section rounded-md shadow-md hover:shadow-lg">
                    <% year_posts.forEach(function (post) { %>
                        <a class="block archive-title bg-slate-100 px-2 py-1 cursor-pointer"
                           href="<%= url_for(post.path) %>"
                        >
                            <%= post.title %>
                        </a>
                    <% }); %>
                </div>
            </details>
        <% }); %>

    </main>
    <footer>
        <div class="fade-in-down-animation">
            <div class="tagcloud-container">
                <div class="tagcloud-content">
                    <%- tagcloud({
                        min_font: 1,
                        max_font: 1.6,
                        unit: 'rem',
                        amount: 100
                    }) %>
                </div>
            </div>
        </div>
    </footer>
</section>
